### 집합체 (Aggregate)

Aggregate는 불변식(Invariant)을 유지하고 여러 도메인 객체를 사용하기 좋게 만들어 준다. 

사방에서 개별 객체에 침범함으로써 불변식(무결성)을 깨뜨리고 일관성을 파괴하는 일이 없도록 지켜주면서 다뤄야 할 도메인 객체의 개수를 적절하게 조절해 준다.

IDDD의 저자인 Vaughn Vernon은 4가지 경험 법칙을 제안한다:

1. 불변식을 통해 일관성 경계를 찾아서 모델링한다. Aggregate은 트랜잭션적 일관성 경계와 동의어다.
2. 작은 Aggregate으로 설계한다.
3. ID로 다른 Aggregate을 참조한다. JPA 등을 사용하면 관련된 객체를 모두 직접 참조할 수 있게 되는데, 그렇게 하지 않는다.
4. 경계 밖에선 결과적 일관성을 사용한다. 이를 위해 도메인 이벤트 등을 사용할 수 있다.

### 불변식

수학에서 [불변식](https://ko.wikipedia.org/wiki/%EB%B6%88%EB%B3%80%EB%9F%89)은 어떤 유형의 변형이 객체에 적용될 때 변경되지 않고 보존되는, 클래스에 의해서 계속 유지되는 속성을 가리킨다.

불변식은 변하지 않는 고유한 값이다.

### 트랜잭션적 일관성과 결과적 일관성